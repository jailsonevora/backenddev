<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>WCF Archives - Backend-Dev</title>
	<atom:link href="https://jailsonevora.com/tag/wcf/feed/" rel="self" type="application/rss+xml" />
	<link>https://jailsonevora.com/tag/wcf/</link>
	<description></description>
	<lastBuildDate>Wed, 19 Apr 2023 11:59:10 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=6.2</generator>
	<item>
		<title>Invoking Different Secure WCF SOAP Services using SoapUI &#8211; Basic Authentication, Part II</title>
		<link>https://jailsonevora.com/2020/04/14/invoking-secure-wcf-soap-service-using-soap-ui-part2/</link>
					<comments>https://jailsonevora.com/2020/04/14/invoking-secure-wcf-soap-service-using-soap-ui-part2/#respond</comments>
		
		<dc:creator><![CDATA[admin]]></dc:creator>
		<pubDate>Tue, 14 Apr 2020 20:19:00 +0000</pubDate>
				<category><![CDATA[Microservices]]></category>
		<category><![CDATA[Service-Oriented Architecture (SOA)]]></category>
		<category><![CDATA[Authentication]]></category>
		<category><![CDATA[C#]]></category>
		<category><![CDATA[Service]]></category>
		<category><![CDATA[SOAP]]></category>
		<category><![CDATA[SoapUI]]></category>
		<category><![CDATA[Testing]]></category>
		<category><![CDATA[WCF]]></category>
		<guid isPermaLink="false">https://www.jeevora.com/?p=1663</guid>

					<description><![CDATA[<p>In the first post of this series, we created a basic authentication service to be invoked using SoapUI. Therefore, in this second post, we will demonstrate step by step how to use this tool to successfully invoke this kind of service. 1-Basic WCF SOAP using SoapUI &#8211; Create New SOAP project Firstly we need to [&#8230;]</p>
<p>The post <a rel="nofollow" href="https://jailsonevora.com/2020/04/14/invoking-secure-wcf-soap-service-using-soap-ui-part2/">Invoking Different Secure WCF SOAP Services using SoapUI &#8211; Basic Authentication, Part II</a> appeared first on <a rel="nofollow" href="http://jailsonevora.com/">Backend-Dev</a>.</p>
]]></description>
										<content:encoded><![CDATA[
<p class="has-drop-cap has-medium-font-size">In the <a href="https://www.jeevora.com/2020/03/31/invoking-secure-wcf-soap-service-using-soap-ui-part1/">first post</a> of this series, we created a basic authentication service to be invoked using SoapUI. Therefore, in this second post, we will demonstrate step by step how to use this tool to successfully invoke this kind of service.</p>



<h3 class="wp-block-heading">1-Basic WCF SOAP using SoapUI &#8211; Create New SOAP project</h3>



<p class="has-medium-font-size">Firstly we need to create a SoapUI project and in<strong><em> </em></strong>the <strong><em>&#8220;Initial WSDL&#8221;, </em></strong>add the URL of the WSDL service created in the first post. Also, add your desired project name. A new project is generated with a sample request for the service.</p>



<figure class="wp-block-image size-large"><img decoding="async" width="1024" height="576" src="../wp-content/uploads/2020/04/image-2-1024x576.png" alt="Basic WCF SOAP using SoapUI" class="wp-image-1901" srcset="https://jailsonevora.com/wp-content/uploads/2020/04/image-2-1024x576.png 1024w, https://jailsonevora.com/wp-content/uploads/2020/04/image-2-300x169.png 300w, https://jailsonevora.com/wp-content/uploads/2020/04/image-2-768x432.png 768w, https://jailsonevora.com/wp-content/uploads/2020/04/image-2.png 1366w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<h3 class="wp-block-heading">2-Basic WCF SOAP using SoapUI &#8211; Authentication and Security-related settings tab</h3>



<p class="has-medium-font-size">After create successfully the new SoapUI project, collapse in until the request´s endpoint. Now double click the request or right-click of the mouse to open the <em><strong>&#8220;Show Request Editor&#8221;</strong></em>. Navigate to the <em><strong>&#8220;Auth (Basic)&#8221;</strong></em> tab in the bottom corner, surround toward a green circle.</p>



<figure class="wp-block-image size-large"><img decoding="async" loading="lazy" width="1366" height="768" src="../wp-content/uploads/2020/03/image-13.png?fit=640%2C360&amp;ssl=1" alt="Basic WCF SOAP using SoapUI" class="wp-image-1684" srcset="https://jailsonevora.com/wp-content/uploads/2020/03/image-13.png 1366w, https://jailsonevora.com/wp-content/uploads/2020/03/image-13-300x169.png 300w, https://jailsonevora.com/wp-content/uploads/2020/03/image-13-1024x576.png 1024w, https://jailsonevora.com/wp-content/uploads/2020/03/image-13-768x432.png 768w" sizes="(max-width: 1366px) 100vw, 1366px" /></figure>



<p class="has-medium-font-size">In the <strong><em>&#8220;Authorization&#8221; </em></strong>dropdown list, select <em><strong>&#8220;Basic&#8221;</strong></em>. It is the same as the service created before. Following, SoapUI shows a form when we can insert the &#8220;Username&#8221; and the &#8220;Password&#8221; service credentials <strong><em>&#8220;AVeryBigSum&#8221;</em></strong>, <em><strong>&#8220;12345&#8221;</strong></em> respectively.</p>



<h3 class="wp-block-heading"> 3-Basic WCF SOAP using SoapUI &#8211; WS-Addressing related settings tab</h3>



<p class="has-medium-font-size">Navigate to the <em><strong>&#8220;</strong></em><strong><em>WS-A&#8221;</em></strong> Configurations tab, and enable the <a rel="noreferrer noopener" href="https://www.w3.org/Submission/ws-addressing/" target="_blank">WS-A addressing</a>, that defines two interoperable constructs typically provided by transport protocols (<em>endpoint references</em>) and messaging systems (<em>message information headers</em>). These constructs normalize this underlying information into a uniform format that can be processed independently of transport or application.</p>



<p class="has-medium-font-size">To instruct the service to process the crucial element in the header, we need to specify to <strong>TRUE </strong>the <strong><em>&#8220;Must understand&#8221;</em></strong>  configuration. The header contains crucial data to process, and the recipient must process the headers. If the service, can&#8217;t process the header or didn&#8217;t receive the header, an error will be raised.</p>



<figure class="wp-block-image size-large"><img decoding="async" loading="lazy" width="1366" height="768" src="../wp-content/uploads/2020/03/image-14.png?fit=640%2C360&amp;ssl=1" alt="Basic WCF SOAP using SoapUI" class="wp-image-1686" srcset="https://jailsonevora.com/wp-content/uploads/2020/03/image-14.png 1366w, https://jailsonevora.com/wp-content/uploads/2020/03/image-14-300x169.png 300w, https://jailsonevora.com/wp-content/uploads/2020/03/image-14-1024x576.png 1024w, https://jailsonevora.com/wp-content/uploads/2020/03/image-14-768x432.png 768w" sizes="(max-width: 1366px) 100vw, 1366px" /></figure>



<p class="has-medium-font-size">This tool allows us to enable the <em><strong>&#8220;Add default wsa: </strong></em>To&#8221; and <em><strong>&#8220;Add default wsa: Action&#8221;</strong></em> configuration. The <em><strong>&#8220;Add default wsa: To&#8221;</strong></em> provides the value for the destination property. The default anonymous value for this property is &#8220;<a rel="noreferrer noopener" href="https://www.w3.org/TR/2006/REC-ws-addr-core-20060509/" target="_blank">http://www.w3.org/2005/08/addressing/anonymous</a>&#8220;. In the above example, the default <strong>wsa: Action</strong>, <strong>wsa: To</strong> and <strong>wsa: MessageId</strong> headers have been enabled, so when we send the request we can see them in the raw request view.</p>



<h3 class="wp-block-heading">4-Secure WCF SOAP using SoapUI &#8211; WS-Reliable message related settings tab</h3>



<p class="has-medium-font-size">To ensure reliable communication between two systems we enable the <em><strong>&#8220;WS-Reliable Message&#8221;</strong></em> specification. The aim of this is to ensure that messages are transferred properly from the sender to the receiver in the presence of network failures. As well we select the latest <strong>version </strong>of this specification for this demonstration.</p>



<figure class="wp-block-image size-large"><img decoding="async" loading="lazy" width="1366" height="768" src="../wp-content/uploads/2020/03/image-15.png?fit=640%2C360&amp;ssl=1" alt="Basic WCF SOAP using SoapUI" class="wp-image-1688" srcset="https://jailsonevora.com/wp-content/uploads/2020/03/image-15.png 1366w, https://jailsonevora.com/wp-content/uploads/2020/03/image-15-300x169.png 300w, https://jailsonevora.com/wp-content/uploads/2020/03/image-15-1024x576.png 1024w, https://jailsonevora.com/wp-content/uploads/2020/03/image-15-768x432.png 768w" sizes="(max-width: 1366px) 100vw, 1366px" /></figure>



<h3 class="wp-block-heading">5- Request properties</h3>



<p class="has-medium-font-size">Finally in the left corner <strong><em>&#8220;Request Properties&#8221;</em></strong> -&gt; <em><strong>WSS-Password Type</strong></em> we select <strong>PasswordText</strong>. WSS-Password Type is a concept that will outline if the password in the XML payload is plain text or digest. For Digest, you can use the Require Ws-Security Password Digest Credentials which is a one to one relationship of user to assertion as we need to know the password. For Plain text, you can use the WS-Security UsernameToken Profile Credentials.</p>



<figure class="wp-block-image size-large"><img decoding="async" loading="lazy" width="1366" height="768" src="../wp-content/uploads/2020/03/image-16.png?fit=640%2C360&amp;ssl=1" alt="" class="wp-image-1689" srcset="https://jailsonevora.com/wp-content/uploads/2020/03/image-16.png 1366w, https://jailsonevora.com/wp-content/uploads/2020/03/image-16-300x169.png 300w, https://jailsonevora.com/wp-content/uploads/2020/03/image-16-1024x576.png 1024w, https://jailsonevora.com/wp-content/uploads/2020/03/image-16-768x432.png 768w" sizes="(max-width: 1366px) 100vw, 1366px" /></figure>



<h2 class="wp-block-heading">Conclusion</h2>



<p class="has-medium-font-size">In this post, we demonstrate how to config a SoapUI project to invoke a WCF Basic Authentication service,&nbsp;we used the <a href="https://www.jeevora.com/2020/03/31/invoking-secure-wcf-soap-service-using-soap-ui-part1/">previous </a>secure service created in the first post to serve as a system under test. The sample of both service and the SoapUi project is accessible from the GitHub repository; to download it, please follow this&nbsp;<a rel="noreferrer noopener" href="https://github.com/jeevora/invoking-different-secure-wcf-soap-services-using-soapui" target="_blank">link</a>.</p>



<p class="has-medium-font-size">Our last and final demonstration in this series will show how to invoke another WCF service secured by Certificate Authentication.</p>
<p>The post <a rel="nofollow" href="https://jailsonevora.com/2020/04/14/invoking-secure-wcf-soap-service-using-soap-ui-part2/">Invoking Different Secure WCF SOAP Services using SoapUI &#8211; Basic Authentication, Part II</a> appeared first on <a rel="nofollow" href="http://jailsonevora.com/">Backend-Dev</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://jailsonevora.com/2020/04/14/invoking-secure-wcf-soap-service-using-soap-ui-part2/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>Invoking Different Secure WCF SOAP Services using SoapUI &#8211; Basic Authentication, Part I</title>
		<link>https://jailsonevora.com/2020/03/31/invoking-secure-wcf-soap-service-using-soap-ui-part1/</link>
					<comments>https://jailsonevora.com/2020/03/31/invoking-secure-wcf-soap-service-using-soap-ui-part1/#respond</comments>
		
		<dc:creator><![CDATA[admin]]></dc:creator>
		<pubDate>Tue, 31 Mar 2020 22:32:00 +0000</pubDate>
				<category><![CDATA[Microservices]]></category>
		<category><![CDATA[Service-Oriented Architecture (SOA)]]></category>
		<category><![CDATA[Authentication]]></category>
		<category><![CDATA[C#]]></category>
		<category><![CDATA[IIS]]></category>
		<category><![CDATA[Service]]></category>
		<category><![CDATA[SOAP]]></category>
		<category><![CDATA[SoapUI]]></category>
		<category><![CDATA[Testing]]></category>
		<category><![CDATA[WCF]]></category>
		<guid isPermaLink="false">https://www.jeevora.com/?p=1632</guid>

					<description><![CDATA[<p>In this series divided into three-part, I will demonstrate how to use the SoapUI API tool to invoke a secured WCF SOAP service. The first post will focus on creating a service where it will be the system under test. The second post will approach the steps required to invoke it while secured by a [&#8230;]</p>
<p>The post <a rel="nofollow" href="https://jailsonevora.com/2020/03/31/invoking-secure-wcf-soap-service-using-soap-ui-part1/">Invoking Different Secure WCF SOAP Services using SoapUI &#8211; Basic Authentication, Part I</a> appeared first on <a rel="nofollow" href="http://jailsonevora.com/">Backend-Dev</a>.</p>
]]></description>
										<content:encoded><![CDATA[
<p class="has-drop-cap has-medium-font-size">In this series divided into three-part, I will demonstrate how to use the SoapUI API tool to invoke a secured WCF SOAP service. The first post will focus on creating a service where it will be the system under test. The <a href="https://www.jeevora.com/2020/04/14/invoking-secure-wcf-soap-service-using-soap-ui-part2/" target="_blank" rel="noreferrer noopener">second post</a> will approach the steps required to invoke it while secured by a basic authentication mechanism. And in the last part, I will make a slight change to the initial service, allowing it to be guarded by the certificate authentication mechanism. In this same post, I will demonstrate how to invoke it using SoapUI as well.</p>



<h2 class="wp-block-heading">WCF Basic Authentication Service</h2>



<p class="has-medium-font-size">The access to the resource in the service to be implemented in this post is secured using <em><strong>Basic Authentication</strong></em> transport security mechanisms. One of many <a rel="noreferrer noopener" aria-label=" (opens in a new tab)" href="https://www.jeevora.com/2019/08/18/wcf-transport-security-with-certificate-authentication/" target="_blank">provided </a>by the Windows Communication Foundation. This kind of mechanism is used in conjunction with HTTPS to provide confidentiality. </p>



<p class="has-medium-font-size">This service exposes one endpoint that calculates <strong><em>a very big sum</em></strong>. To get started quickly we will use the default template of the WCF Service Application provided in Visual Studio 2019. </p>



<p class="has-medium-font-size">From Menu File, New, then Project or click on Start Page to start a new project. Let’s name the solution and the project to <strong>AVeryBigSum_BasicAuthentication</strong>. </p>



<p class="has-medium-font-size">Now you’ll see a couple of files already added to the WCF Service project. We have the option to delete the interface <em>IService1.cs</em> and service <em>Service1.svc</em> file to create new ones. Otherwise, we can rename both files, therefore pay attention to renaming as well as the markup of the Service.svc file, by right click in it -&gt; <em>View Markup</em> and change to that bellow.</p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: csharp; title: ; notranslate">
&lt;%@ ServiceHost Language=&quot;C#&quot; Debug=&quot;true&quot; 
Service=&quot;AVeryBigSum_BasicAuthentication.Avbs&quot; CodeBehind=&quot;Avbs.svc.cs&quot; %&gt;
</pre></div>


<figure class="wp-block-image size-large"><img decoding="async" loading="lazy" width="1024" height="576" src="../wp-content/uploads/2020/04/image-5-1024x576.png" alt="Secure WCF SOAP using SoapUI" class="wp-image-1914" srcset="https://jailsonevora.com/wp-content/uploads/2020/04/image-5-1024x576.png 1024w, https://jailsonevora.com/wp-content/uploads/2020/04/image-5-300x169.png 300w, https://jailsonevora.com/wp-content/uploads/2020/04/image-5-768x432.png 768w, https://jailsonevora.com/wp-content/uploads/2020/04/image-5.png 1366w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p class="has-medium-font-size">After renaming both files, open the IAvbs.cs, copy the following code and add it to the modified interface. </p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: csharp; title: ; notranslate">
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;

namespace AVeryBigSum_BasicAuthentication
{
    &#91;ServiceContract]
    public interface IAvbs
    {

        &#91;OperationContract]
        long AVeryBS(long&#91;] ar);
    }
}
</pre></div>


<p class="has-medium-font-size">In case you chose to delete those files you can add a new interface by right-clicking on the project and <em>Add new item</em>. Select the Interface template and rename it to IAvbs. As well you need to copy the code above and add it to the newly created interface.</p>



<p class="has-medium-font-size">The service implements only one operation defined in the interface contract. To implement it, we need to modify the default file created by VStudio or add a new service class Avbs.svc which will implement the above-defined interface.</p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: csharp; title: ; notranslate">
using System;
/*...*/
namespace AVeryBigSum_BasicAuthentication
{
    public class Avbs : IAvbs
    {
        public long AVeryBS(long&#91;] ar)
        {
            long aVeryBigSum = 0;

            foreach (long i in ar) aVeryBigSum += i;
            
            return aVeryBigSum;
        }
    }
}
</pre></div>


<p class="has-medium-font-size">So far we have defined a service contract, an operation with a sample definition. Now we have to define its endpoints. To add an endpoint, we need to change the configuration file (web.config). Apart from copying and paste, we need to understand the importance of each of these WCF tags. </p>



<h3 class="wp-block-heading"> 1-Secure WCF SOAP using SoapUI &#8211; AppSettings</h3>



<p class="has-medium-font-size">Hence, let&#8217;s start with the <em>AppSettings </em>element. This element contains custom application settings. The element stores custom application configuration information, such as database connection strings, file paths, XML Web service URLs, or any other custom configuration information for an application.</p>



<p class="has-medium-font-size">We use this element to store the Service´s <em>User </em>and <em>Password </em>credentials. The key/value pairs specified in the element are accessed in code using the ConfigurationSettings library in this way ConfigurationManager.AppSettings[&#8220;AVeryBigSum_User&#8221;].</p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: xml; title: ; notranslate">
&lt;appSettings&gt;
    &lt;add key=&quot;aspnet:UseTaskFriendlySynchronizationContext&quot; value=&quot;true&quot;/&gt;
    &lt;add key=&quot;AVeryBigSum_User&quot; value=&quot;AVeryBigSum&quot;/&gt;
    &lt;add key=&quot;AVeryBigSum_Pass&quot; value=&quot;12345&quot;/&gt;
  &lt;/appSettings&gt;
</pre></div>


<p class="has-medium-font-size">Thus, we can change these credentials without the need to rebuild the dynamic link libraries&nbsp;<strong>file</strong>s (DLL) of our project.</p>



<p class="has-medium-font-size">Despite the advantage of using the element above, all the magic related to the definition of the service happens in the boundaries of the ServiceModel tag.</p>



<h3 class="wp-block-heading">2-Secure WCF SOAP using SoapUI &#8211; Behaviors</h3>



<p class="has-medium-font-size">This tag defines the protocol elements consumed by endpoints and services respectively. The service credentials<em> </em>element is essential to define. It specifies the custom validation mode used in the authentication process. </p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: xml; title: ; notranslate">
&lt;behaviors&gt;
      &lt;serviceBehaviors&gt;
        &lt;behavior name=&quot;DebugModeBehavior&quot;&gt;
          &lt;!-- To avoid disclosing metadata information, set the values below to false before deployment --&gt;
          &lt;serviceMetadata httpGetEnabled=&quot;true&quot; httpsGetEnabled=&quot;true&quot;/&gt;
          &lt;!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information --&gt;
          &lt;serviceDebug includeExceptionDetailInFaults=&quot;true&quot;/&gt;
          &lt;!--For UserPass Authentication--&gt;
          &lt;serviceCredentials&gt;
            &lt;userNameAuthentication userNamePasswordValidationMode=&quot;Custom&quot; customUserNamePasswordValidatorType=&quot;AVeryBigSum_BasicAuthentication.ServiceAuthenticator, AVeryBigSum_BasicAuthentication&quot;/&gt;
          &lt;/serviceCredentials&gt;
        &lt;/behavior&gt;
      &lt;/serviceBehaviors&gt;
    &lt;/behaviors&gt;
</pre></div>


<p class="has-medium-font-size"> Inside <i>service credential</i>s, another important property is defined to specifies the settings for username and password validation. The <em>userNamePasswordValidationMode </em>property sets how the credential is validated. Our service uses a custom class to validate the credentials. This class <em>AVeryBigSum.ServiceAuthenticator</em> can be found in the AVeryBigSum project.</p>



<h3 class="wp-block-heading">3-Secure WCF SOAP using SoapUI &#8211; Bindings</h3>



<p class="has-medium-font-size"> Each endpoint in a WCF service requires a binding to be well-specified. A binding consists of an ordered stack of binding elements, each of which specifies a part of the communication information required to connect to a service endpoint.</p>



<p class="has-medium-font-size">As we can see we are using WSHttpBinding. It represents an interoperable binding that supports distributed transactions, secure, reliable sessions. </p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: xml; title: ; notranslate">
 &lt;bindings&gt;
      &lt;wsHttpBinding&gt;
        &lt;!-- configure wsHttp binding with Transport security mode and clientCredentialType as Certificate --&gt;
        &lt;binding name=&quot;wsHttpBinding_LargeBinding&quot; closeTimeout=&quot;00:01:00&quot; openTimeout=&quot;00:01:00&quot; receiveTimeout=&quot;00:10:00&quot; sendTimeout=&quot;00:10:00&quot; bypassProxyOnLocal=&quot;false&quot; 
                 transactionFlow=&quot;false&quot; hostNameComparisonMode=&quot;StrongWildcard&quot; maxBufferPoolSize=&quot;250000000&quot; maxReceivedMessageSize=&quot;250000000&quot; messageEncoding=&quot;Text&quot; 
                 textEncoding=&quot;utf-8&quot; useDefaultWebProxy=&quot;true&quot; allowCookies=&quot;false&quot;&gt;
          &lt;readerQuotas maxDepth=&quot;2000000&quot; maxStringContentLength=&quot;2147483647&quot; maxArrayLength=&quot;2147483647&quot; maxBytesPerRead=&quot;2147483647&quot; maxNameTableCharCount=&quot;2147483647&quot;/&gt;
          &lt;reliableSession ordered=&quot;true&quot; inactivityTimeout=&quot;00:10:00&quot; enabled=&quot;false&quot;/&gt;
          &lt;!--For UserPass Authentication--&gt;
          &lt;security mode=&quot;TransportWithMessageCredential&quot;&gt;
            &lt;message clientCredentialType=&quot;UserName&quot; establishSecurityContext=&quot;false&quot;/&gt;
          &lt;/security&gt;
        &lt;/binding&gt;
      &lt;/wsHttpBinding&gt;
    &lt;/bindings&gt;
</pre></div>


<p class="has-medium-font-size"> WSHttpBinding uses the HTTP transport and provides message security, transactions, reliable messaging, and WS-Addressing, either enabled by default or available through a single control setting.</p>



<p class="has-medium-font-size">Inside the WSHttpBinding element, we define the security mode as TransportWithMessageCredential. The transport determines the actual mechanism that provides the transport-level security. For HTTP, the mechanism is Secure Sockets Layer (SSL) over HTTP (HTTPS); </p>



<h3 class="wp-block-heading">4-Secure WCF SOAP using SoapUI &#8211; Service</h3>



<p class="has-medium-font-size">Finally, at the service element, we define endpoints, exposing the service metadata. It is useful to publish metadata like Web services Description Language (WSDL) document that describes all methods and data types employed by a service. It will be used by SoapUi in the next post of this saga, to retrieve and invoke all serviceable endpoints.</p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: xml; title: ; notranslate">
&lt;services&gt;
      &lt;service behaviorConfiguration=&quot;DebugModeBehavior&quot; name=&quot;AVeryBigSum_BasicAuthentication.Avbs&quot;&gt;
        &lt;endpoint address=&quot;endpointAVeryBigSum_BasicAuthentication&quot; binding=&quot;wsHttpBinding&quot;
          bindingConfiguration=&quot;wsHttpBinding_LargeBinding&quot; name=&quot;EndpointAVeryBigSum_BasicAuthentication&quot;
          contract=&quot;AVeryBigSum_BasicAuthentication.IAvbs&quot; /&gt;
        &lt;endpoint address=&quot;mex&quot; binding=&quot;wsHttpBinding&quot; bindingConfiguration=&quot;wsHttpBinding_LargeBinding&quot;
          name=&quot;mexEndpoint&quot; contract=&quot;IMetadataExchange&quot; /&gt;
      &lt;/service&gt;
    &lt;/services&gt;
</pre></div>


<h3 class="wp-block-heading">5-Secure WCF SOAP using SoapUI &#8211; Custom Validator Class</h3>



<p class="has-medium-font-size">The custom validator extends the UserNamePasswordValidator class and overrides the method <em>Validate. </em>This validator is defined in Service Behaviors as default Authorization manager, as showed above in the behavior section. This class compares the information received by the client call to those defined in the AppsSetting element.</p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: csharp; title: ; notranslate">
using Microsoft.IdentityModel.Tokens;
using System;
using System.Collections.Generic;
using System.Configuration;
using System.IdentityModel.Selectors;
using System.Linq;
using System.ServiceModel;
using System.Web;
namespace AVeryBigSum_BasicAuthentication
{
    public class ServiceAuthenticator : UserNamePasswordValidator
    {
        public override void Validate(string userName, string password)
        {

            if (string.IsNullOrEmpty(userName) || string.IsNullOrEmpty(password))

                throw new SecurityTokenException(&quot;Username and password required&quot;);

            if (!(userName == ConfigurationManager.AppSettings&#91;&quot;AVeryBigSum_User&quot;] &amp;&amp; password == ConfigurationManager.AppSettings&#91;&quot;AVeryBigSum_Pass&quot;]))

                throw new FaultException(string.Format(&quot;Wrong username ({0}) or password &quot;, userName));

        }
    }
}
</pre></div>


<p class="has-medium-font-size">For this class to work properly, we need to add two external libraries to the project. We can do this by right click on the project -&gt; Manage NuGet Packages, browse for <em>Microsoft.IdentityModel.Logging</em> and <em>Microsoft.IdentityModel.Tokens</em> packages and add both.</p>



<p class="has-medium-font-size">Now that we have defined the endpoint, next, we will host the service in the local development server.</p>



<h2 class="wp-block-heading">Deploy and Run the service</h2>



<p class="has-medium-font-size">1 &#8211; To host our service in IIS, right-click on the project and go to <em>Properties</em>. In properties window select Web tab.</p>



<p class="has-medium-font-size">2- Now under Servers on Web settings, you’ll see the following details, change the “IIS Express” to “IIS Server”.</p>



<figure class="wp-block-image size-large"><img decoding="async" loading="lazy" width="1024" height="553" src="../wp-content/uploads/2020/04/image-6-1024x553.png" alt="Secure WCF SOAP using SoapUI" class="wp-image-1916" srcset="https://jailsonevora.com/wp-content/uploads/2020/04/image-6-1024x553.png 1024w, https://jailsonevora.com/wp-content/uploads/2020/04/image-6-300x162.png 300w, https://jailsonevora.com/wp-content/uploads/2020/04/image-6-768x415.png 768w, https://jailsonevora.com/wp-content/uploads/2020/04/image-6.png 1366w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<p class="has-medium-font-size">3 &#8211; Now Click on Create Virtual Directory with Visual Studio running As Administrator. You’ll get a message <em>The Virtual directory was created successfully!</em> Otherwise, you’ll receive an error message and you need to launch Visual studio again as Administrator.</p>



<p class="has-medium-font-size">Now press F5 and your application will be up and running on the IIS server instead of your IIS express.</p>



<figure class="wp-block-image size-large"><img decoding="async" loading="lazy" width="1024" height="665" src="../wp-content/uploads/2020/04/image-7-1024x665.png" alt="Secure WCF SOAP using SoapUI" class="wp-image-1918" srcset="https://jailsonevora.com/wp-content/uploads/2020/04/image-7-1024x665.png 1024w, https://jailsonevora.com/wp-content/uploads/2020/04/image-7-300x195.png 300w, https://jailsonevora.com/wp-content/uploads/2020/04/image-7-768x499.png 768w, https://jailsonevora.com/wp-content/uploads/2020/04/image-7.png 1125w" sizes="(max-width: 1024px) 100vw, 1024px" /></figure>



<h2 class="wp-block-heading">Conclusion</h2>



<p class="has-medium-font-size"> By the end of this demonstration,&nbsp;we have a secure service to be invoked by SoapUI. Our next post will demonstrate step by step how to do that.</p>



<p class="has-medium-font-size"> Also, the sample is accessible from the GitHub repository; to download it, please follow this&nbsp;<a href="https://github.com/jeevora/invoking-different-secure-wcf-soap-services-using-soapui" target="_blank" rel="noreferrer noopener">link</a>. </p>
<p>The post <a rel="nofollow" href="https://jailsonevora.com/2020/03/31/invoking-secure-wcf-soap-service-using-soap-ui-part1/">Invoking Different Secure WCF SOAP Services using SoapUI &#8211; Basic Authentication, Part I</a> appeared first on <a rel="nofollow" href="http://jailsonevora.com/">Backend-Dev</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://jailsonevora.com/2020/03/31/invoking-secure-wcf-soap-service-using-soap-ui-part1/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
		<item>
		<title>WCF Transport Security with Certificate Authentication</title>
		<link>https://jailsonevora.com/2019/08/18/wcf-transport-security-with-certificate-authentication/</link>
					<comments>https://jailsonevora.com/2019/08/18/wcf-transport-security-with-certificate-authentication/#respond</comments>
		
		<dc:creator><![CDATA[admin]]></dc:creator>
		<pubDate>Sun, 18 Aug 2019 13:16:04 +0000</pubDate>
				<category><![CDATA[Service-Oriented Architecture (SOA)]]></category>
		<category><![CDATA[Client]]></category>
		<category><![CDATA[IIS]]></category>
		<category><![CDATA[Service]]></category>
		<category><![CDATA[ServiceContract]]></category>
		<category><![CDATA[SOAP]]></category>
		<category><![CDATA[SSL]]></category>
		<category><![CDATA[WCF]]></category>
		<category><![CDATA[WSHttpBinding]]></category>
		<category><![CDATA[X.509 certificates]]></category>
		<guid isPermaLink="false">https://www.jeevora.com/?p=470</guid>

					<description><![CDATA[<p>This post demonstrates the use of X.509 certificates for server and client authentication when using WCF transport security. This security mode is ideal for communication between applications in the intranet network. Our demo creates a service that will implement a simple, repeated string algorithm. In this scenario, the service is hosted under Internet Information Services [&#8230;]</p>
<p>The post <a rel="nofollow" href="https://jailsonevora.com/2019/08/18/wcf-transport-security-with-certificate-authentication/">WCF Transport Security with Certificate Authentication</a> appeared first on <a rel="nofollow" href="http://jailsonevora.com/">Backend-Dev</a>.</p>
]]></description>
										<content:encoded><![CDATA[
<p>  </p>



<p class="has-drop-cap has-medium-font-size">This post demonstrates the use of <a rel="noreferrer noopener" aria-label="X.509 certificates (opens in a new tab)" href="https://en.wikipedia.org/wiki/X.509" target="_blank">X.509 certificates</a> for server and client authentication when using WCF <strong>transport security</strong>. This security mode is ideal for communication between applications in the intranet network.</p>



<p class="has-medium-font-size">Our demo creates a service that will implement a simple, repeated string algorithm. In this scenario, the service is hosted under <a rel="noreferrer noopener" aria-label="Internet Information Services (opens in a new tab)" href="https://en.wikipedia.org/wiki/Internet_Information_Services" target="_blank">Internet Information Services</a> (IIS) which is configured with Secure Sockets Layer (SSL) and configured with an SSL certificate to allow clients to verify the identity of the server. <gwmw style="display:none;"><gwmw style="display:none;"></gwmw></gwmw></p>



<p class="has-medium-font-size">On the other hand, our client is a parameterized test project that will validate the logic of our service. The client is also configured with an X.509 certificate that allows the service to verify the identity of the client. The server’s certificate must be trusted by the client, and the client’s certificate must be trusted by the server in a request/reply message pattern as illustrated by the following diagram. <gwmw style="display:none;"><gwmw style="display:none;"></gwmw></gwmw></p>



<figure class="wp-block-image aligncenter size-full is-resized"><img decoding="async" loading="lazy" src="../wp-content/uploads/2019/08/image-7.png" alt="WCF-Transport-Security-with-Certificate-Authentication" class="wp-image-780" width="607" height="284" srcset="https://jailsonevora.com/wp-content/uploads/2019/08/image-7.png 607w, https://jailsonevora.com/wp-content/uploads/2019/08/image-7-300x140.png 300w" sizes="(max-width: 607px) 100vw, 607px" /><figcaption class="wp-element-caption"> <a rel="noreferrer noopener" href="https://docs.microsoft.com/en-us/dotnet/framework/wcf/feature-details/transport-security-with-certificate-authentication" target="_blank"><em>Request/reply message patterns</em></a><em>.</em></figcaption></figure>



<p class="has-medium-font-size"> We choose <em>transport </em>as the security mode, allowing the communication between existing <a rel="noreferrer noopener" href="https://www.jeevora.com/2019/08/10/java-ee/" target="_blank">client and service</a>. Data Integrity and Data Confidentiality are preserved. The transport protocol is HTTPS with <a href="https://docs.microsoft.com/en-us/dotnet/api/system.servicemodel.wshttpbinding">WSHttpBinding</a> binding. <gwmw style="display:none;"><gwmw style="display:none;"></gwmw></gwmw></p>



<h3 class="wp-block-heading">WCF Transport Security &#8211; Transfer Security Mode and  Message Security Level </h3>



<p class="has-medium-font-size"> WCF offers diverse <a rel="noreferrer noopener" aria-label="transfer security  modes and message security level (opens in a new tab)" href="https://www.tutorialspoint.com/wcf/wcf_security.htm#" target="_blank">transfer security modes and message security levels</a> to ensure secure communication between a client and a server. One of them is <strong>Transport</strong>. It is the easiest way to achieve a secured transfer of messages via the use of communication protocols such as TCP, IPC, Https, and MSMQ. This mode is more effective when the transfer is point-to-point and is used mostly in a controlled environment, i.e., intranet applications. </p>



<p class="has-medium-font-size">The message security level is not dependent on WCF protocols. It is employed with message data itself by encrypting the data by using a standard algorithm. Certificate message security level along with message encryption allows both the client and the service to get authentication with a certificate.<gwmw style="display:none;"><gwmw style="display:none;"></gwmw></gwmw></p>



<div style="height:100px" aria-hidden="true" class="wp-block-spacer"></div>



<h2 class="wp-block-heading">WCF Transport Security &#8211; Configuring the Service</h2>



<p class="has-medium-font-size"> Our service defines one method from Lili lowercase English letters that she repeated infinitely many times. It should return an integer representing the number of occurrences of&nbsp;<strong><em><code>a</code></em></strong>&nbsp;in the prefix of length&nbsp;in the infinitely repeating string.<gwmw style="display:none;"><gwmw style="display:none;"></gwmw><gwmw style="display:none;"><gwmw style="display:none;"></gwmw></gwmw></gwmw></p>



<h3 class="wp-block-heading">Interface</h3>



<p class="has-medium-font-size">The interface defines <strong><code>RepeatedString </code></strong>as the only method/operation. The operation allows the insertion of two parameters, one of type <strong><code>string </code></strong>as a string that repeats infinitely many times and an integer as the number of characters to consider in counting the repeated character. The operation will return an object with the count of the letter&nbsp;<em><strong>a&#8217;s</strong></em> in the first&nbsp;<strong><code>number </code></strong>letters of the infinite repeated string. <gwmw style="display:none;"><gwmw style="display:none;"></gwmw><gwmw style="display:none;"></gwmw></gwmw></p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: csharp; highlight: [8]; title: ; notranslate">
...
namespace RepeatedString
{
    &#91;ServiceContract]
    public interface IRepeatedString
    {
        &#91;OperationContract]
        long RepeatedString(string repeatedString, long number);
    }
}
</pre></div>


<h3 class="wp-block-heading">Implementation</h3>



<p class="has-medium-font-size">The operation interacts through the repeated string, counting the number of a character occurrence. With performance in mind, firstly we should calculate the factor and the remainder of the repeated string, avoiding interact through all characters.</p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: csharp; highlight: [8,12,14]; title: ; notranslate">
...
namespace RepeatedString
{
    public class RepeatedString : IRepeatedString
    {
        long IRepeatedString.RepeatedString(string repeatedString, long number)
        {
            long count_repeated_a = 0,  factor = number / repeatedString.Length, remainder = number % repeatedString.Length;

            for (int i = 0; i &lt; repeatedString.Length; i++)
            {
                if (repeatedString&#91;i] == 'a') count_repeated_a += (i &lt; remainder) ? factor + 1 : factor;
            }
            return count_repeated_a;
        }
    }
}
</pre></div>


<h3 class="wp-block-heading">Binding</h3>



<p class="has-medium-font-size">Since the service in this scenario is hosted under IIS, it is configured with a web<gwmw class="ginger-module-highlighter-mistake-type-3" id="gwmw-15662636228197422383351">.</gwmw>config file. The following web<gwmw class="ginger-module-highlighter-mistake-type-3" id="gwmw-15662636237574012731771">.</gwmw>config shows how to configure the&nbsp;<a href="https://docs.microsoft.com/en-us/dotnet/api/system.servicemodel.wshttpbinding">WSHttpBinding</a><em>&nbsp;</em>to use transport security and X.509 client credentials.  To mimic a large binding, we define the timeout connection with<gwmw class="ginger-module-highlighter-mistake-type-3" id="gwmw-15662636419893410174432"> </gwmw><em><strong>sending</strong></em><strong>, </strong><em><strong>receive</strong></em><strong>, as well in </strong><em><strong>open </strong></em><strong>and </strong><em><strong>close</strong> </em>tag attributes. Also, we define the maximum amount of memory allocated, in bytes, for the buffer manager in <a rel="noreferrer noopener" aria-label=" (opens in a new tab)" href="https://docs.microsoft.com/en-us/dotnet/api/system.servicemodel.wshttpbindingbase.maxbufferpoolsize?view=netframework-4.8" target="_blank"><gwmw class="ginger-module-highlighter-mistake-type-1" id="gwmw-15662636264933074664085">maxBufferPoolSize</gwmw></a> and&nbsp;for a message that can be received on a channel <a rel="noreferrer noopener" aria-label=" (opens in a new tab)" href="https://docs.microsoft.com/en-us/dotnet/api/system.servicemodel.basichttpbinding.maxreceivedmessagesize?view=netframework-4.0" target="_blank"><gwmw class="ginger-module-highlighter-mistake-type-1" id="gwmw-15662636264939241772379">maxReceivedMessageSize</gwmw></a>. At <strong><em>security tag</em></strong>, we define a <strong><em>transport </em></strong>mode with <strong><code><gwmw class="ginger-module-highlighter-mistake-type-1" id="gwmw-15662636305857561990755">clientCredentialType</gwmw>="Certificate"</code></strong> highlighted in line 21 of the code.</p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: xml; highlight: [5,6,7,8,12,13,20,21,22]; title: ; notranslate">
...
&lt;bindings&gt;
  &lt;wsHttpBinding&gt;
    &lt;binding name=&quot;wsHttpBinding_LargeBinding&quot;
      closeTimeout=&quot;00:01:00&quot;
      openTimeout=&quot;00:01:00&quot;
      receiveTimeout=&quot;00:10:00&quot;
      sendTimeout=&quot;00:10:00&quot;
      bypassProxyOnLocal=&quot;false&quot;
      transactionFlow=&quot;false&quot;
      hostNameComparisonMode=&quot;StrongWildcard&quot;
      maxBufferPoolSize=&quot;250000000&quot;
      maxReceivedMessageSize=&quot;250000000&quot;
      messageEncoding=&quot;Text&quot;
      textEncoding=&quot;utf-8&quot;
      useDefaultWebProxy=&quot;true&quot;
      allowCookies=&quot;false&quot;&gt;
      &lt;readerQuotas maxDepth=&quot;2000000&quot; maxStringContentLength=&quot;2147483647&quot; maxArrayLength=&quot;2147483647&quot; maxBytesPerRead=&quot;2147483647&quot; maxNameTableCharCount=&quot;2147483647&quot; /&gt;
      &lt;reliableSession ordered=&quot;true&quot; inactivityTimeout=&quot;00:10:00&quot; enabled=&quot;false&quot; /&gt;
      &lt;security mode=&quot;Transport&quot;&gt;
        &lt;transport clientCredentialType=&quot;Certificate&quot; /&gt;
      &lt;/security&gt;
    &lt;/binding&gt;
  &lt;/wsHttpBinding&gt;    
&lt;/bindings&gt;
...
</pre></div>


<h3 class="wp-block-heading">Behavior</h3>



<p class="has-medium-font-size">At service behaviors, we disable <code>includeExceptionDetailInFaults </code>to avoid disclosure of sensitive information. During development, you may want your service to also send other exceptions back to the client to assist you in debugging. This is a development-only feature and should not be employed in deployed services.  <gwmw style="display:none;"><gwmw style="display:none;"></gwmw><gwmw style="display:none;"></gwmw></gwmw></p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: xml; highlight: [6]; title: ; notranslate">
...
&lt;behaviors&gt;
  &lt;serviceBehaviors&gt;
    &lt;behavior name=&quot;DebugModeBehavior&quot;&gt;
      &lt;serviceMetadata httpGetEnabled=&quot;false&quot; httpsGetEnabled=&quot;true&quot;/&gt;
      &lt;serviceDebug includeExceptionDetailInFaults=&quot;false&quot;/&gt;
    &lt;/behavior&gt;
  &lt;/serviceBehaviors&gt;
&lt;/behaviors&gt;
...
</pre></div>


<h3 class="wp-block-heading">Services</h3>



<p class="has-medium-font-size">Finally, at the <em><strong>services tag,</strong></em> we define our service, exposing two endpoints. One for <a rel="noreferrer noopener" aria-label="metadata exchange (opens in a new tab)" href="https://docs.microsoft.com/en-us/dotnet/api/system.servicemodel.description.imetadataexchange?view=netframework-4.8" target="_blank">metadata exchange</a> [<strong><code>&lt;endpoint address="mex"</code></strong><code> ...</code>] that allows exposes metadata about the service. It is useful to publish metadata about the service like <a rel="noreferrer noopener" aria-label="Web Services Description Language (WSDL) (opens in a new tab)" href="https://www.w3.org/TR/2001/NOTE-wsdl-20010315" target="_blank">Web Services Description Language (WSDL)</a><em> </em>document that describes all of the methods and data types employed by a service. Returning metadata about a WCF service allows consumers of service to easily create clients for the service. <gwmw style="display:none;"><gwmw style="display:none;"><gwmw style="display:none;"></gwmw></gwmw></gwmw></p>



<p class="has-medium-font-size">With the <em><strong>behavior </strong></em>and <em><strong>binding </strong></em>defined, we complete the attributes for our main endpoint [<strong><code>&lt;endpoint address="<gwmw class="ginger-module-highlighter-mistake-type-1" id="gwmw-15662637361444731005860">endpointRepeatedStringService</gwmw>" binding="<gwmw class="ginger-module-highlighter-mistake-type-1" id="gwmw-15662637361441146018336">wsHttpBinding</gwmw>"</code></strong><gwmw class="ginger-module-highlighter-mistake-type-3" id="gwmw-15662637361442021322659">].</gwmw></p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: xml; highlight: [4,5]; title: ; notranslate">
...
&lt;services&gt;
  &lt;service behaviorConfiguration=&quot;DebugModeBehavior&quot; name=&quot;RepeatedString.RepeatedString&quot;&gt;
    &lt;endpoint address=&quot;endpointRepeatedStringService&quot; binding=&quot;wsHttpBinding&quot; name=&quot;EndpointRepeatedString&quot; bindingConfiguration=&quot;wsHttpBinding_LargeBinding&quot; contract=&quot;RepeatedString.IRepeatedString&quot; /&gt;
    &lt;endpoint address=&quot;mex&quot; binding=&quot;wsHttpBinding&quot; bindingConfiguration=&quot;wsHttpBinding_LargeBinding&quot; name=&quot;mexEndpoint&quot; contract=&quot;IMetadataExchange&quot; /&gt;
  &lt;/service&gt;
&lt;/services&gt;
...
</pre></div>


<h3 class="wp-block-heading">SSL Settings<gwmw style="display:none;"><gwmw style="display:none;"></gwmw></gwmw></h3>



<p class="has-medium-font-size">After we&nbsp;configure our service, we need to enable Secure Socket Layer (SSL) on IIS to secure the service. Start the IIS Manager, in connections panel, under sites, select the&nbsp;<code>ReapeatedString</code>service (1) that we want to enable SSL.</p>



<div class="wp-block-image"><figure class="aligncenter is-resized"><figure><img decoding="async" loading="lazy" src="https://dzone.com/storage/temp/12372316-iis-cert-require.png" alt="Image title" width="1366" height="738"></figure><figcaption><gwmw style="display:none;"></gwmw></figcaption></figure></div>



<p class="has-medium-font-size">On the selected service &gt; Home page&nbsp;in the central panel, double-click&nbsp;<strong>SSL Settings</strong>&nbsp;(2).</p>



<div class="wp-block-image"><figure class="aligncenter is-resized"><figure><img decoding="async" loading="lazy" src="https://dzone.com/storage/temp/12372232-iis-cert-require-2.png" alt="Image title" width="1364" height="743"></figure><figcaption><gwmw style="display:none;"></gwmw></figcaption></figure></div>



<p class="has-medium-font-size">In&nbsp;<strong>SSL Settings</strong>&nbsp;page, first, select&nbsp;<strong>Require SSL</strong>&nbsp;checkbox and under&nbsp;<strong>Client&nbsp;certificates,&nbsp;</strong>select&nbsp;<strong>Require</strong>. To persist, under&nbsp;<gwmw class="ginger-module-highlighter-mistake-anim ginger-module-highlighter-mistake-type-3" id="gwmw-15663893751045090762685"><strong>Actions&nbsp;</strong>panel</gwmw> on the right, <gwmw class="ginger-module-highlighter-mistake-anim ginger-module-highlighter-mistake-type-3" id="gwmw-15663893751044881622032">apply</gwmw> these changes. </p>



<figure class="wp-block-image aligncenter"><img decoding="async" src="https://dzone.com/storage/temp/12372233-iis-cert-require-3.png" alt="Image title"/></figure>



<div style="height:100px" aria-hidden="true" class="wp-block-spacer"></div>



<h2 class="wp-block-heading">WCF Transport Security &#8211; Parameterized Test Client</h2>



<p class="has-medium-font-size"> The new <a rel="noreferrer noopener" href="https://devblogs.microsoft.com/devops/taking-the-mstest-framework-forward-with-mstest-v2/" target="_blank">Visual Studio MSTest V2</a> allows us to use parameters in the test class. This class could contain multiple test methods and each method is executed with the different parameters provided. It helps save time when executing the same tests with different inputs and expected results, as described below<strong><code><gwmw class="ginger-module-highlighter-mistake-type-3" id="gwmw-15662638609130691652128">[</gwmw>DataRow<gwmw class="ginger-module-highlighter-mistake-type-3" id="gwmw-15662638593274303099022">(</gwmw>"<gwmw class="ginger-module-highlighter-mistake-type-1" id="gwmw-15662638593270683393755">ababbaa</gwmw>", 10, 6)]</code></strong>. The first parameter is a string to repeat, the second is the number of characters to consider and the last one is the <em><strong>expected </strong></em>result.  </p>



<h3 class="wp-block-heading"> WCF Transport Security Test class implementation</h3>



<p class="has-medium-font-size"> The test project generates the WSDL document of our service describes as <strong><code>RepeatedStringReference</code></strong>. In the <em><strong>arrange</strong></em>, we instantiate the client object and we act <gwmw class="ginger-module-highlighter-mistake-type-1" id="gwmw-15662638815910938350029">cal</gwmw>l<gwmw class="ginger-module-highlighter-mistake-type-1" id="gwmw-15662638815910938350029">ing</gwmw> <strong><code>client<gwmw class="ginger-module-highlighter-mistake-type-3" id="gwmw-15662638815919565320928">.</gwmw>RepeatedString<gwmw class="ginger-module-highlighter-mistake-type-3" id="gwmw-15662638815916354022391">(</gwmw><gwmw class="ginger-module-highlighter-mistake-type-1" id="gwmw-15662638815912043048600">repeatedString</gwmw>, number)</code></strong><em> </em>operation<em>. </em>To validate, we <em><strong>assert </strong></em>that the expected results have occurred.</p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: csharp; highlight: [7,8,9,10,14,16]; title: ; notranslate">
...
namespace UnitTest_TransportSecurity_W_CertificateAuth
{
    &#91;TestClass]
    public class RepeatedString_UnitTest
    {
        &#91;DataRow(&quot;ababbaa&quot;, 10, 6)]
        &#91;DataRow(&quot;aaaaa&quot;, 123, 123)]
        &#91;DataRow(&quot;ccc&quot;, 1000000000000, 0)]
        &#91;DataRow(&quot;a&quot;, 1000000000000, 1000000000000)]
        &#91;DataTestMethod]
        public void RepeatedStringTest(string repeatedString, long number, long expected)
        {
            RepeatedStringReference.RepeatedStringClient client = new RepeatedStringReference.RepeatedStringClient();
            
            Assert.AreEqual(client.RepeatedString(repeatedString, number), expected);

            client.Close();
        }
    }
}
</pre></div>


<h3 class="wp-block-heading">Client Binding</h3>



<p class="has-medium-font-size">  The client can be configured problematically or in an app.config file. In this config, the client <em>binding </em>does not differ from service configuration binding. Both have the same timeout config as well as other attributes. Another important defined tag is <strong><a rel="noreferrer noopener" aria-label=" (opens in a new tab)" href="https://docs.microsoft.com/en-us/dotnet/api/system.xml.xmldictionaryreaderquotas?view=netframework-4.8" target="_blank">XmlDictionaryReaderQuotas.</a></strong> It contains configurable quota values for XML dictionary readers which limit the amount of memory utilized by an encoder while creating a message.<gwmw style="display:none;"><gwmw style="display:none;"></gwmw><gwmw style="display:none;"><gwmw style="display:none;"></gwmw></gwmw></gwmw></p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: xml; highlight: [18,19]; title: ; notranslate">
...
&lt;bindings&gt;
  &lt;wsHttpBinding&gt;
    &lt;binding name=&quot;wsHttpBinding_LargeBinding&quot;
      closeTimeout=&quot;00:01:00&quot;
      openTimeout=&quot;00:01:00&quot;
      receiveTimeout=&quot;00:10:00&quot;
      sendTimeout=&quot;00:10:00&quot;
      bypassProxyOnLocal=&quot;false&quot;
      transactionFlow=&quot;false&quot;
      hostNameComparisonMode=&quot;StrongWildcard&quot;
      maxBufferPoolSize=&quot;250000000&quot;
      maxReceivedMessageSize=&quot;250000000&quot;
      messageEncoding=&quot;Text&quot;
      textEncoding=&quot;utf-8&quot;
      useDefaultWebProxy=&quot;true&quot;
      allowCookies=&quot;false&quot;&gt;
      &lt;readerQuotas maxDepth=&quot;2000000&quot; maxStringContentLength=&quot;2147483647&quot; maxArrayLength=&quot;2147483647&quot; maxBytesPerRead=&quot;2147483647&quot; maxNameTableCharCount=&quot;2147483647&quot; /&gt;
      &lt;reliableSession ordered=&quot;true&quot; inactivityTimeout=&quot;00:10:00&quot; enabled=&quot;false&quot; /&gt;
      &lt;security mode=&quot;Transport&quot;&gt;
        &lt;transport clientCredentialType=&quot;Certificate&quot; /&gt;
      &lt;/security&gt;
    &lt;/binding&gt;
  &lt;/wsHttpBinding&gt;    
&lt;/bindings&gt;
...
</pre></div>


<h3 class="wp-block-heading">Client Behavior</h3>



<p class="has-medium-font-size">At client behavior, we add a&nbsp;<a href="https://docs.microsoft.com/en-us/dotnet/framework/configure-apps/file-schema/wcf/clientcredentials"><code>&lt;clientCredentials&gt;</code></a>&nbsp;element to the&nbsp;<a href="https://docs.microsoft.com/en-us/dotnet/framework/configure-apps/file-schema/wcf/behaviors"><code>&lt;behaviors&gt;</code></a>&nbsp;element. Bear in mind that it is crucial to set the required <em><strong>name</strong></em>&nbsp;attribute to an appropriate value. We also add a&nbsp;<a href="https://docs.microsoft.com/en-us/dotnet/framework/configure-apps/file-schema/wcf/clientcertificate-of-servicecredentials"><code>&lt;clientCertificate&gt;</code></a>&nbsp;element to the&nbsp;<a href="https://docs.microsoft.com/en-us/dotnet/framework/configure-apps/file-schema/wcf/clientcredentials"><code>&lt;clientCredentials&gt;</code></a>&nbsp;element setting these attributes <code>storeLocation, storeName, x509FindType, and findValue</code><em> </em>to appropriate values certificate information.<gwmw style="display:none;"><gwmw style="display:none;"><gwmw style="display:none;"></gwmw></gwmw></gwmw></p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: xml; highlight: [6,7,8,9]; title: ; notranslate">
...
&lt;behaviors&gt;
  &lt;endpointBehaviors&gt;
    &lt;behavior name=&quot;endpointCredentialBehavior&quot;&gt;
      &lt;clientCredentials&gt;
        &lt;clientCertificate findValue=&quot;Certificate Subject Name&quot;
                            storeLocation=&quot;CurrentUser&quot;
                            storeName=&quot;My&quot;
                            x509FindType=&quot;FindBySubjectName&quot; /&gt;
      &lt;/clientCredentials&gt;
    &lt;/behavior&gt;
  &lt;/endpointBehaviors&gt;
&lt;/behaviors&gt;
...
</pre></div>


<h3 class="wp-block-heading">Client Endpoint </h3>



<p class="has-medium-font-size"> When configuring the client, <strong>we should specify the behavior by setting the&nbsp;<code><gwmw class="ginger-module-highlighter-mistake-type-1" id="gwmw-15662639912760560882721">behaviorConfiguration</gwmw> </code>attribute on<gwmw class="ginger-module-highlighter-mistake-type-3" id="gwmw-15662639912768635045114"> </gwmw>the</strong>&nbsp;&lt;endpoint&gt;&nbsp;element. The endpoint element is a child of the&nbsp;<a href="https://docs.microsoft.com/en-us/dotnet/framework/configure-apps/file-schema/wcf/client"><code>&lt;client&gt;</code></a>&nbsp;element. Also, we need to specify the name of the binding configuration by setting the&nbsp;<code>bindingConfiguration&nbsp;</code>attribute <gwmw class="ginger-module-highlighter-mistake-type-3" id="gwmw-15662639941678029552138">to</gwmw> the binding for the client. If we generated the configuration file, the binding&#8217;s name is automatically generated.</p>


<div class="wp-block-syntaxhighlighter-code "><pre class="brush: xml; highlight: [3]; title: ; notranslate">
...
&lt;client&gt;
  &lt;endpoint name=&quot;EndpointRepeatedString&quot; address=&quot;https://localhost/RepeatedString/RepeatedString.svc/endpointRepeatedStringService&quot; behaviorConfiguration=&quot;endpointCredentialBehavior&quot; binding=&quot;wsHttpBinding&quot; bindingConfiguration=&quot;wsHttpBinding_LargeBinding&quot; contract=&quot;RepeatedStringReference.IRepeatedString&quot; /&gt;
&lt;/client&gt;
...
</pre></div>


<div style="height:100px" aria-hidden="true" class="wp-block-spacer"></div>



<h2 class="wp-block-heading"> Run Unit test and download the source-code </h2>



<figure class="wp-block-image alignleft size-full is-resized"><img decoding="async" loading="lazy" src="../wp-content/uploads/2019/08/image-2.png" alt="WCF-Transport-Security-with-Certificate-Authentication test explorar tab" class="wp-image-726" width="626" height="503" srcset="https://jailsonevora.com/wp-content/uploads/2019/08/image-2.png 834w, https://jailsonevora.com/wp-content/uploads/2019/08/image-2-300x241.png 300w, https://jailsonevora.com/wp-content/uploads/2019/08/image-2-768x618.png 768w" sizes="(max-width: 626px) 100vw, 626px" /></figure>



<p></p>



<p class="has-medium-font-size">1 &#8211; To run the unit test, open Test Explorer, by choosing <em>Test &gt; Windows &gt; </em><a rel="noreferrer noopener" aria-label="Test Explorer (opens in a new tab)" href="https://docs.microsoft.com/en-us/visualstudio/test/run-unit-tests-with-test-explorer?view=vs-2019" target="_blank">Test Explorer</a> from the top menu bar. </p>



<p class="has-medium-font-size">2 &#8211; Run your unit tests by clicking Run All. </p>



<p class="has-medium-font-size">After the tests have completed, a green checkmark indicates that a test passed. A red &#8220;x&#8221; icon indicates that a test failed.</p>



<figure class="wp-block-image alignleft is-resized"><a href="https://github.com/jeevora/testing-wcf-certificate-authentication-service-using-mstestv2" target="_blank" rel="noreferrer noopener"><img decoding="async" loading="lazy" src="../wp-content/uploads/2019/07/github-1-300x293.png" alt="https://github.com/JERBEvora/WCF_Transport_Security_With_Cert_Post" class="wp-image-120" width="75" height="73" srcset="https://jailsonevora.com/wp-content/uploads/2019/07/github-1-300x293.png 300w, https://jailsonevora.com/wp-content/uploads/2019/07/github-1.png 524w" sizes="(max-width: 75px) 100vw, 75px" /></a></figure>



<p class="has-medium-font-size">The source code is hosted on Git Hub. To download it, please follow the link attached to the git icon.</p>



<p><gwmw style="display:none;"><gwmw style="display:none;"></gwmw></gwmw></p>



<div style="height:100px" aria-hidden="true" class="wp-block-spacer"></div>



<p></p>
<p>The post <a rel="nofollow" href="https://jailsonevora.com/2019/08/18/wcf-transport-security-with-certificate-authentication/">WCF Transport Security with Certificate Authentication</a> appeared first on <a rel="nofollow" href="http://jailsonevora.com/">Backend-Dev</a>.</p>
]]></content:encoded>
					
					<wfw:commentRss>https://jailsonevora.com/2019/08/18/wcf-transport-security-with-certificate-authentication/feed/</wfw:commentRss>
			<slash:comments>0</slash:comments>
		
		
			</item>
	</channel>
</rss>

<!--
Performance optimized by W3 Total Cache. Learn more: https://www.boldgrid.com/w3-total-cache/

Object Caching 85/87 objects using disk
Page Caching using disk: enhanced (Page is feed) 
Content Delivery Network via N/A
Lazy Loading (feed)
Database Caching 2/6 queries in 0.010 seconds using disk

Served from: localhost @ 2023-04-19 13:19:32 by W3 Total Cache
-->